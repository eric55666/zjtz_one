<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>投资预测工坊 - 证券投资学互动游戏</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #2a3c7f, #3d52a0);
            color: #fff;
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        h1 {
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            background: linear-gradient(90deg, #ff9e00, #ffd166);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }
        
        .subtitle {
            font-size: 1.2rem;
            color: #a8c0ff;
            margin-bottom: 20px;
        }
        
        .game-area {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 25px;
        }
        
        @media (max-width: 900px) {
            .game-area {
                grid-template-columns: 1fr;
            }
        }
        
        .panel {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }
        
        .panel-title {
            font-size: 1.5rem;
            margin-bottom: 20px;
            color: #ffd166;
            display: flex;
            align-items: center;
            gap: 10px;
            padding-bottom: 10px;
            border-bottom: 2px solid rgba(255, 255, 255, 0.2);
        }
        
        .data-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .data-card {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 15px;
            text-align: center;
            transition: all 0.3s;
        }
        
        .data-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 15px rgba(0, 0, 0, 0.2);
        }
        
        .data-value {
            font-size: 1.8rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .data-change {
            font-size: 0.9rem;
            padding: 3px 8px;
            border-radius: 20px;
            display: inline-block;
        }
        
        .positive {
            background: rgba(6, 214, 160, 0.3);
            color: #06d6a0;
        }
        
        .negative {
            background: rgba(239, 71, 111, 0.3);
            color: #ef476f;
        }
        
        .industry-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .industry-item {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 15px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: all 0.3s;
            cursor: pointer;
        }
        
        .industry-item:hover {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .industry-item.selected {
            background: rgba(76, 201, 240, 0.3);
            border: 1px solid #4cc9f0;
        }
        
        .industry-info {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }
        
        .industry-name {
            font-weight: bold;
            font-size: 1.1rem;
        }
        
        .industry-growth {
            font-size: 0.9rem;
            color: #a8c0ff;
        }
        
        .industry-salary {
            font-size: 1.2rem;
            font-weight: bold;
        }
        
        .investment-controls {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .slider-container {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }
        
        .slider-header {
            display: flex;
            justify-content: space-between;
        }
        
        .slider {
            width: 100%;
            height: 10px;
            -webkit-appearance: none;
            appearance: none;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 5px;
            outline: none;
        }
        
        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #4cc9f0;
            cursor: pointer;
        }
        
        .investment-amount {
            font-size: 1.5rem;
            font-weight: bold;
            text-align: center;
            margin: 10px 0;
            color: #ffd166;
        }
        
        .btn {
            padding: 15px 25px;
            border: none;
            border-radius: 12px;
            background: linear-gradient(45deg, #4361ee, #3a0ca3);
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }
        
        .btn:disabled {
            background: rgba(255, 255, 255, 0.2);
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }
        
        .btn-secondary {
            background: rgba(255, 255, 255, 0.2);
        }
        
        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.3);
        }
        
        .chart-container {
            height: 300px;
            margin-top: 20px;
        }
        
        .results-panel {
            grid-column: 1 / -1;
        }
        
        .result-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .result-card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
        }
        
        .result-value {
            font-size: 2rem;
            font-weight: bold;
            margin: 10px 0;
        }
        
        .result-label {
            color: #a8c0ff;
            font-size: 0.9rem;
        }
        
        .risk-meter {
            height: 20px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 10px;
            margin: 20px 0;
            overflow: hidden;
        }
        
        .risk-level {
            height: 100%;
            border-radius: 10px;
            transition: width 0.5s;
        }
        
        .risk-low {
            background: linear-gradient(90deg, #06d6a0, #4cc9f0);
        }
        
        .risk-medium {
            background: linear-gradient(90deg, #ffd166, #ff9e00);
        }
        
        .risk-high {
            background: linear-gradient(90deg, #ef476f, #f72585);
        }
        
        .analysis-section {
            margin-top: 30px;
        }
        
        .analysis-text {
            line-height: 1.6;
            margin-bottom: 15px;
        }
        
        .hidden {
            display: none;
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 20px 0;
        }
        
        .step {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
        }
        
        .step.active {
            background: #4cc9f0;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-chart-line"></i> 投资预测工坊</h1>
            <div class="subtitle">基于经济数据和行业工资信息的投资决策模拟</div>
            <div class="step-indicator">
                <div class="step active"></div>
                <div class="step"></div>
                <div class="step"></div>
                <div class="step"></div>
            </div>
        </header>
        
        <div class="game-area">
            <!-- 经济数据面板 -->
            <div class="panel">
                <div class="panel-title">
                    <i class="fas fa-database"></i> 宏观经济数据
                </div>
                
                <div class="data-grid">
                    <div class="data-card">
                        <div>GDP增长率</div>
                        <div class="data-value">5.2%</div>
                        <div class="data-change positive">+0.3%</div>
                    </div>
                    
                    <div class="data-card">
                        <div>失业率</div>
                        <div class="data-value">4.8%</div>
                        <div class="data-change negative">-0.2%</div>
                    </div>
                    
                    <div class="data-card">
                        <div>通货膨胀率</div>
                        <div class="data-value">2.1%</div>
                        <div class="data-change positive">+0.1%</div>
                    </div>
                    
                    <div class="data-card">
                        <div>利率水平</div>
                        <div class="data-value">3.5%</div>
                        <div class="data-change">不变</div>
                    </div>
                </div>
                
                <div class="panel-title">
                    <i class="fas fa-industry"></i> 行业工资与增长趋势
                </div>
                
                <div class="industry-list">
                    <div class="industry-item" data-industry="tech">
                        <div class="industry-info">
                            <div class="industry-name">信息技术</div>
                            <div class="industry-growth positive">年增长 +8.2%</div>
                        </div>
                        <div class="industry-salary">¥15,800</div>
                    </div>
                    
                    <div class="industry-item" data-industry="finance">
                        <div class="industry-info">
                            <div class="industry-name">金融业</div>
                            <div class="industry-growth positive">年增长 +6.5%</div>
                        </div>
                        <div class="industry-salary">¥18,200</div>
                    </div>
                    
                    <div class="industry-item" data-industry="manufacturing">
                        <div class="industry-info">
                            <div class="industry-name">制造业</div>
                            <div class="industry-growth positive">年增长 +3.2%</div>
                        </div>
                        <div class="industry-salary">¥9,500</div>
                    </div>
                    
                    <div class="industry-item" data-industry="healthcare">
                        <div class="industry-info">
                            <div class="industry-name">医疗健康</div>
                            <div class="industry-growth positive">年增长 +7.1%</div>
                        </div>
                        <div class="industry-salary">¥12,400</div>
                    </div>
                    
                    <div class="industry-item" data-industry="energy">
                        <div class="industry-info">
                            <div class="industry-name">能源</div>
                            <div class="industry-growth negative">年增长 -1.2%</div>
                        </div>
                        <div class="industry-salary">¥11,300</div>
                    </div>
                </div>
            </div>
            
            <!-- 投资决策面板 -->
            <div class="panel">
                <div class="panel-title">
                    <i class="fas fa-coins"></i> 投资决策
                </div>
                
                <div class="investment-controls">
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>投资金额</span>
                            <span id="investment-amount-display">¥50,000</span>
                        </div>
                        <input type="range" min="10000" max="100000" value="50000" step="5000" class="slider" id="investment-slider">
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>投资期限</span>
                            <span id="investment-period-display">3 年</span>
                        </div>
                        <input type="range" min="1" max="5" value="3" class="slider" id="period-slider">
                    </div>
                    
                    <div class="slider-container">
                        <div class="slider-header">
                            <span>风险偏好</span>
                            <span id="risk-preference-display">中等</span>
                        </div>
                        <input type="range" min="1" max="3" value="2" class="slider" id="risk-slider">
                    </div>
                    
                    <div class="risk-meter">
                        <div class="risk-level risk-medium" id="risk-visual" style="width: 50%;"></div>
                    </div>
                    
                    <button class="btn" id="predict-btn">
                        <i class="fas fa-calculator"></i> 生成投资预测
                    </button>
                    
                    <button class="btn btn-secondary" id="reset-btn">
                        <i class="fas fa-redo"></i> 重置决策
                    </button>
                </div>
                
                <div class="chart-container">
                    <canvas id="investment-chart"></canvas>
                </div>
            </div>
            
            <!-- 结果分析面板 -->
            <div class="panel results-panel hidden" id="results-panel">
                <div class="panel-title">
                    <i class="fas fa-chart-bar"></i> 投资结果分析
                </div>
                
                <div class="result-cards">
                    <div class="result-card">
                        <div class="result-label">预期收益</div>
                        <div class="result-value" id="expected-return">+12.5%</div>
                        <div class="result-label">基于行业增长和宏观经济数据</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">风险等级</div>
                        <div class="result-value" id="risk-level">中等</div>
                        <div class="result-label">基于投资组合和历史波动</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">最大回撤</div>
                        <div class="result-value" id="max-drawdown">-8.2%</div>
                        <div class="result-label">可能的最大损失</div>
                    </div>
                    
                    <div class="result-card">
                        <div class="result-label">夏普比率</div>
                        <div class="result-value" id="sharpe-ratio">1.24</div>
                        <div class="result-label">风险调整后收益</div>
                    </div>
                </div>
                
                <div class="analysis-section">
                    <div class="panel-title">
                        <i class="fas fa-lightbulb"></i> 风险管理建议
                    </div>
                    
                    <div class="analysis-text">
                        <p>根据您的投资选择和当前经济环境，我们建议：</p>
                        <p id="risk-advice">考虑分散投资到2-3个相关行业，以降低单一行业风险。信息技术和医疗健康行业具有较好的增长前景，但需注意估值水平。</p>
                    </div>
                    
                    <div class="panel-title" style="margin-top: 30px;">
                        <i class="fas fa-graduation-cap"></i> 学习要点
                    </div>
                    
                    <div class="analysis-text">
                        <p>• 行业工资增长通常与行业前景正相关，是投资决策的重要参考指标</p>
                        <p>• 宏观经济数据（如GDP、失业率）影响整体市场表现</p>
                        <p>• 风险与收益通常成正比，但通过分散投资可以优化风险收益比</p>
                        <p>• 投资期限越长，通常可以承受更高的波动风险</p>
                    </div>
                </div>
                
                <button class="btn" id="new-simulation-btn" style="margin-top: 20px;">
                    <i class="fas fa-play-circle"></i> 开始新的模拟
                </button>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // 获取DOM元素
            const investmentSlider = document.getElementById('investment-slider');
            const periodSlider = document.getElementById('period-slider');
            const riskSlider = document.getElementById('risk-slider');
            const investmentAmountDisplay = document.getElementById('investment-amount-display');
            const investmentPeriodDisplay = document.getElementById('investment-period-display');
            const riskPreferenceDisplay = document.getElementById('risk-preference-display');
            const riskVisual = document.getElementById('risk-visual');
            const predictBtn = document.getElementById('predict-btn');
            const resetBtn = document.getElementById('reset-btn');
            const resultsPanel = document.getElementById('results-panel');
            const newSimulationBtn = document.getElementById('new-simulation-btn');
            const industryItems = document.querySelectorAll('.industry-item');
            
            // 结果元素
            const expectedReturn = document.getElementById('expected-return');
            const riskLevel = document.getElementById('risk-level');
            const maxDrawdown = document.getElementById('max-drawdown');
            const sharpeRatio = document.getElementById('sharpe-ratio');
            const riskAdvice = document.getElementById('risk-advice');
            
            // 图表
            const ctx = document.getElementById('investment-chart').getContext('2d');
            let investmentChart;
            
            // 初始化图表
            function initChart() {
                investmentChart = new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['当前', '1年后', '2年后', '3年后'],
                        datasets: [{
                            label: '投资价值',
                            data: [50000, 52000, 54500, 56250],
                            borderColor: '#4cc9f0',
                            backgroundColor: 'rgba(76, 201, 240, 0.1)',
                            borderWidth: 3,
                            fill: true,
                            tension: 0.4
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                labels: {
                                    color: '#fff'
                                }
                            },
                            tooltip: {
                                mode: 'index',
                                intersect: false
                            }
                        },
                        scales: {
                            x: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#fff'
                                }
                            },
                            y: {
                                grid: {
                                    color: 'rgba(255, 255, 255, 0.1)'
                                },
                                ticks: {
                                    color: '#fff',
                                    callback: function(value) {
                                        return '¥' + value.toLocaleString();
                                    }
                                }
                            }
                        }
                    }
                });
            }
            
            // 更新风险可视化
            function updateRiskVisual() {
                const riskValue = parseInt(riskSlider.value);
                let width, riskClass, riskText;
                
                switch(riskValue) {
                    case 1:
                        width = '25%';
                        riskClass = 'risk-low';
                        riskText = '保守';
                        break;
                    case 2:
                        width = '50%';
                        riskClass = 'risk-medium';
                        riskText = '中等';
                        break;
                    case 3:
                        width = '85%';
                        riskClass = 'risk-high';
                        riskText = '积极';
                        break;
                }
                
                riskVisual.style.width = width;
                riskVisual.className = 'risk-level ' + riskClass;
                riskPreferenceDisplay.textContent = riskText;
            }
            
            // 行业选择
            let selectedIndustry = null;
            industryItems.forEach(item => {
                item.addEventListener('click', function() {
                    industryItems.forEach(i => i.classList.remove('selected'));
                    this.classList.add('selected');
                    selectedIndustry = this.getAttribute('data-industry');
                });
            });
            
            // 滑块事件监听
            investmentSlider.addEventListener('input', function() {
                investmentAmountDisplay.textContent = '¥' + parseInt(this.value).toLocaleString();
            });
            
            periodSlider.addEventListener('input', function() {
                investmentPeriodDisplay.textContent = this.value + ' 年';
            });
            
            riskSlider.addEventListener('input', function() {
                updateRiskVisual();
            });
            
            // 生成投资预测
            predictBtn.addEventListener('click', function() {
                if (!selectedIndustry) {
                    alert('请先选择一个行业！');
                    return;
                }
                
                // 模拟计算投资结果
                const investmentAmount = parseInt(investmentSlider.value);
                const period = parseInt(periodSlider.value);
                const risk = parseInt(riskSlider.value);
                
                // 根据行业和风险偏好计算预期收益
                let baseReturn, volatility, maxLoss, sharpe;
                
                // 不同行业的基准收益率
                const industryReturns = {
                    'tech': 0.15,
                    'finance': 0.12,
                    'manufacturing': 0.08,
                    'healthcare': 0.13,
                    'energy': 0.05
                };
                
                // 风险调整
                const riskMultipliers = [0.7, 1.0, 1.4];
                const baseReturnRate = industryReturns[selectedIndustry] * riskMultipliers[risk-1];
                
                // 计算最终收益
                const totalReturn = (Math.pow(1 + baseReturnRate, period) - 1) * 100;
                
                // 设置结果
                expectedReturn.textContent = '+' + totalReturn.toFixed(1) + '%';
                
                // 设置风险指标
                if (risk === 1) {
                    riskLevel.textContent = '低';
                    maxDrawdown.textContent = '-4.5%';
                    sharpeRatio.textContent = '0.85';
                    riskAdvice.textContent = '您的投资组合风险较低，适合保守型投资者。考虑增加一些中等风险资产以提高潜在收益。';
                } else if (risk === 2) {
                    riskLevel.textContent = '中等';
                    maxDrawdown.textContent = '-8.2%';
                    sharpeRatio.textContent = '1.24';
                    riskAdvice.textContent = '您的投资组合风险适中，平衡了收益与风险。考虑分散投资到2-3个相关行业，以降低单一行业风险。';
                } else {
                    riskLevel.textContent = '高';
                    maxDrawdown.textContent = '-15.7%';
                    sharpeRatio.textContent = '1.42';
                    riskAdvice.textContent = '您的投资组合风险较高，但潜在收益也更高。确保您有足够的风险承受能力，并考虑设置止损点。';
                }
                
                // 更新图表
                updateChart(investmentAmount, baseReturnRate, period);
                
                // 显示结果面板
                resultsPanel.classList.remove('hidden');
                
                // 更新步骤指示器
                document.querySelectorAll('.step').forEach((step, index) => {
                    if (index === 3) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });
            });
            
            // 更新图表数据
            function updateChart(initialAmount, returnRate, years) {
                const data = [initialAmount];
                
                for (let i = 1; i <= years; i++) {
                    // 添加一些随机波动
                    const fluctuation = (Math.random() * 0.1) - 0.05;
                    const yearReturn = returnRate + fluctuation;
                    data.push(data[i-1] * (1 + yearReturn));
                }
                
                investmentChart.data.labels = ['当前'].concat(Array.from({length: years}, (_, i) => `${i+1}年后`));
                investmentChart.data.datasets[0].data = data;
                investmentChart.update();
            }
            
            // 重置决策
            resetBtn.addEventListener('click', function() {
                investmentSlider.value = 50000;
                periodSlider.value = 3;
                riskSlider.value = 2;
                
                investmentAmountDisplay.textContent = '¥50,000';
                investmentPeriodDisplay.textContent = '3 年';
                
                updateRiskVisual();
                
                industryItems.forEach(i => i.classList.remove('selected'));
                selectedIndustry = null;
                
                initChart();
                
                // 更新步骤指示器
                document.querySelectorAll('.step').forEach((step, index) => {
                    if (index === 0) {
                        step.classList.add('active');
                    } else {
                        step.classList.remove('active');
                    }
                });
            });
            
            // 开始新的模拟
            newSimulationBtn.addEventListener('click', function() {
                resultsPanel.classList.add('hidden');
                resetBtn.click();
            });
            
            // 初始化
            initChart();
            updateRiskVisual();
        });
    </script>
</body>
</html>