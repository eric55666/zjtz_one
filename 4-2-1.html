<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>行业分析 - 波特五力模型与行业生命周期分析</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #34495e;
            --success: #2ecc71;
            --warning: #f39c12;
            --introductory: #3498db;
            --growth: #2ecc71;
            --maturity: #f39c12;
            --decline: #e74c3c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: var(--dark);
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: white;
            padding: 30px 20px;
            border-radius: 10px;
            margin-bottom: 30px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            text-align: center;
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .tabs {
            display: flex;
            background: white;
            border-radius: 10px 10px 0 0;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
        }
        
        .tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            background: var(--light);
            border: none;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }
        
        .tab.active {
            background: var(--secondary);
            color: white;
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 20px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 30px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .panel {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }
        
        .panel-title {
            font-size: 1.4rem;
            color: var(--primary);
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--light);
        }
        
        .industry-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 20px;
        }
        
        .industry-card {
            background: var(--light);
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 3px solid transparent;
        }
        
        .industry-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }
        
        .industry-card.active {
            border-color: var(--secondary);
            background: rgba(52, 152, 219, 0.1);
        }
        
        .industry-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .industry-name {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 5px;
        }
        
        .industry-description {
            font-size: 0.9rem;
            color: #666;
        }
        
        .five-forces-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .force-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            border-left: 4px solid var(--secondary);
            transition: transform 0.3s;
        }
        
        .force-card:hover {
            transform: translateY(-5px);
        }
        
        .force-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .force-description {
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .force-rating {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }
        
        .rating-btn {
            flex: 1;
            padding: 8px;
            background: var(--light);
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: all 0.3s;
            font-size: 0.9rem;
        }
        
        .rating-btn:hover {
            background: #d6eaf8;
        }
        
        .rating-btn.selected {
            background: var(--secondary);
            color: white;
        }
        
        .rating-btn.low {
            border-left: 3px solid var(--success);
        }
        
        .rating-btn.medium {
            border-left: 3px solid var(--warning);
        }
        
        .rating-btn.high {
            border-left: 3px solid var(--accent);
        }
        
        .analysis-result {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin-top: 20px;
        }
        
        .result-score {
            font-size: 1.5rem;
            font-weight: 700;
            text-align: center;
            margin-bottom: 15px;
        }
        
        .result-description {
            margin-bottom: 15px;
        }
        
        .investment-recommendation {
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid var(--secondary);
        }
        
        .lifecycle-comparison {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }
        
        .lifecycle-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s;
        }
        
        .lifecycle-card.introductory {
            border-top: 4px solid var(--introductory);
        }
        
        .lifecycle-card.growth {
            border-top: 4px solid var(--growth);
        }
        
        .lifecycle-card.maturity {
            border-top: 4px solid var(--maturity);
        }
        
        .lifecycle-card.decline {
            border-top: 4px solid var(--decline);
        }
        
        .lifecycle-card:hover {
            transform: translateY(-5px);
        }
        
        .lifecycle-title {
            font-weight: 600;
            margin-bottom: 10px;
            color: var(--primary);
        }
        
        .lifecycle-description {
            margin-bottom: 15px;
            font-size: 0.9rem;
            color: #666;
        }
        
        .lifecycle-characteristics {
            margin-top: 10px;
        }
        
        .characteristic {
            display: flex;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }
        
        .characteristic-name {
            font-weight: 600;
            width: 120px;
        }
        
        .characteristic-value {
            flex: 1;
        }
        
        .btn {
            display: inline-block;
            padding: 12px 24px;
            background: var(--secondary);
            color: white;
            border: none;
            border-radius: 5px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .btn:hover {
            background: var(--primary);
            transform: translateY(-2px);
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-accent {
            background: var(--accent);
        }
        
        .chart-container {
            height: 400px;
            margin-top: 20px;
            background: white;
            border-radius: 8px;
            padding: 15px;
        }
        
        .instructions {
            background: var(--light);
            padding: 20px;
            border-radius: 10px;
            margin-top: 30px;
        }
        
        .instructions h3 {
            color: var(--primary);
            margin-bottom: 15px;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 10px;
        }
        
        @media (max-width: 768px) {
            .industry-selection {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                flex-direction: column;
            }
            
            .five-forces-container {
                grid-template-columns: 1fr;
            }
            
            .lifecycle-comparison {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>行业分析模拟</h1>
            <p class="subtitle">使用波特五力模型分析行业 | 提出投资建议 | 比较不同行业生命周期</p>
        </header>
        
        <div class="tabs">
            <button class="tab active" data-tab="five-forces">波特五力分析</button>
            <button class="tab" data-tab="lifecycle">行业生命周期</button>
            <button class="tab" data-tab="investment">投资建议</button>
        </div>
        
        <div id="five-forces" class="tab-content active">
            <div class="panel">
                <h2 class="panel-title">选择分析行业</h2>
                <p>选择一个行业，使用波特五力模型分析其竞争环境。</p>
                
                <div class="industry-selection">
                    <div class="industry-card active" data-industry="manufacturing">
                        <div class="industry-icon">🏭</div>
                        <div class="industry-name">制造业</div>
                        <div class="industry-description">包括汽车、机械、电子等传统制造领域</div>
                    </div>
                    
                    <div class="industry-card" data-industry="technology">
                        <div class="industry-icon">💻</div>
                        <div class="industry-name">科技行业</div>
                        <div class="industry-description">包括软件、硬件、互联网服务等领域</div>
                    </div>
                    
                    <div class="industry-card" data-industry="healthcare">
                        <div class="industry-icon">🏥</div>
                        <div class="industry-name">医疗健康</div>
                        <div class="industry-description">包括制药、医疗器械、医疗服务等领域</div>
                    </div>
                    
                    <div class="industry-card" data-industry="consumer">
                        <div class="industry-icon">🛍️</div>
                        <div class="industry-name">消费品</div>
                        <div class="industry-description">包括食品饮料、日用品、服装等领域</div>
                    </div>
                </div>
                
                <div class="panel">
                    <h2 class="panel-title" id="selected-industry-name">制造业 - 波特五力分析</h2>
                    <p>评估以下五个方面的竞争强度，分析行业吸引力。</p>
                    
                    <div class="five-forces-container">
                        <div class="force-card">
                            <div class="force-title">1. 供应商议价能力</div>
                            <div class="force-description">供应商对价格、质量和交货条件的影响力</div>
                            <div class="force-rating">
                                <button class="rating-btn low" data-force="supplier" data-rating="low">低</button>
                                <button class="rating-btn medium" data-force="supplier" data-rating="medium">中</button>
                                <button class="rating-btn high" data-force="supplier" data-rating="high">高</button>
                            </div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">2. 购买者议价能力</div>
                            <div class="force-description">购买者对价格、质量和服务的谈判能力</div>
                            <div class="force-rating">
                                <button class="rating-btn low" data-force="buyer" data-rating="low">低</button>
                                <button class="rating-btn medium" data-force="buyer" data-rating="medium">中</button>
                                <button class="rating-btn high" data-force="buyer" data-rating="high">高</button>
                            </div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">3. 新进入者威胁</div>
                            <div class="force-description">新竞争者进入市场的难易程度</div>
                            <div class="force-rating">
                                <button class="rating-btn low" data-force="new-entrants" data-rating="low">低</button>
                                <button class="rating-btn medium" data-force="new-entrants" data-rating="medium">中</button>
                                <button class="rating-btn high" data-force="new-entrants" data-rating="high">高</button>
                            </div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">4. 替代品威胁</div>
                            <div class="force-description">其他产品或服务满足相同需求的可能性</div>
                            <div class="force-rating">
                                <button class="rating-btn low" data-force="substitutes" data-rating="low">低</button>
                                <button class="rating-btn medium" data-force="substitutes" data-rating="medium">中</button>
                                <button class="rating-btn high" data-force="substitutes" data-rating="high">高</button>
                            </div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">5. 同业竞争程度</div>
                            <div class="force-description">现有竞争者之间的竞争激烈程度</div>
                            <div class="force-rating">
                                <button class="rating-btn low" data-force="rivalry" data-rating="low">低</button>
                                <button class="rating-btn medium" data-force="rivalry" data-rating="medium">中</button>
                                <button class="rating-btn high" data-force="rivalry" data-rating="high">高</button>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn" id="analyze-industry" style="margin-top: 20px;">分析行业吸引力</button>
                    
                    <div class="analysis-result" id="analysis-result" style="display: none;">
                        <div class="result-score" id="attractiveness-score">行业吸引力评分: --/100</div>
                        <div class="result-description" id="attractiveness-description"></div>
                        
                        <div class="investment-recommendation">
                            <h3>初步投资建议</h3>
                            <div id="investment-suggestion"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="lifecycle" class="tab-content">
            <div class="panel">
                <h2 class="panel-title">行业生命周期比较</h2>
                <p>了解不同行业在生命周期各阶段的特点和投资机会。</p>
                
                <div class="lifecycle-comparison">
                    <div class="lifecycle-card introductory">
                        <div class="lifecycle-title">导入期</div>
                        <div class="lifecycle-description">行业刚刚形成，产品和技术不成熟，市场接受度低</div>
                        <div class="lifecycle-characteristics">
                            <div class="characteristic">
                                <div class="characteristic-name">增长速度</div>
                                <div class="characteristic-value">缓慢</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">竞争程度</div>
                                <div class="characteristic-value">低</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">盈利能力</div>
                                <div class="characteristic-value">亏损或微利</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">典型行业</div>
                                <div class="characteristic-value">太空旅游、量子计算</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="lifecycle-card growth">
                        <div class="lifecycle-title">成长期</div>
                        <div class="lifecycle-description">市场需求快速增长，技术逐渐成熟，竞争者涌入</div>
                        <div class="lifecycle-characteristics">
                            <div class="characteristic">
                                <div class="characteristic-name">增长速度</div>
                                <div class="characteristic-value">快速</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">竞争程度</div>
                                <div class="characteristic-value">加剧</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">盈利能力</div>
                                <div class="characteristic-value">提高</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">典型行业</div>
                                <div class="characteristic-value">电动汽车、人工智能</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="lifecycle-card maturity">
                        <div class="lifecycle-title">成熟期</div>
                        <div class="lifecycle-description">市场趋于饱和，增长放缓，竞争激烈，行业整合</div>
                        <div class="lifecycle-characteristics">
                            <div class="characteristic">
                                <div class="characteristic-name">增长速度</div>
                                <div class="characteristic-value">缓慢</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">竞争程度</div>
                                <div class="characteristic-value">激烈</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">盈利能力</div>
                                <div class="characteristic-value">稳定</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">典型行业</div>
                                <div class="characteristic-value">汽车制造、家电</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="lifecycle-card decline">
                        <div class="lifecycle-title">衰退期</div>
                        <div class="lifecycle-description">市场萎缩，需求下降，企业退出或转型</div>
                        <div class="lifecycle-characteristics">
                            <div class="characteristic">
                                <div class="characteristic-name">增长速度</div>
                                <div class="characteristic-value">负增长</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">竞争程度</div>
                                <div class="characteristic-value">减弱</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">盈利能力</div>
                                <div class="characteristic-value">下降</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">典型行业</div>
                                <div class="characteristic-value">传统胶卷、报刊</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="chart-container">
                    <canvas id="lifecycle-chart"></canvas>
                </div>
            </div>
        </div>
        
        <div id="investment" class="tab-content">
            <div class="panel">
                <h2 class="panel-title">行业投资策略</h2>
                <p>基于行业分析和生命周期阶段，制定投资策略。</p>
                
                <div class="panel">
                    <h3>投资组合构建</h3>
                    <p>根据您的行业分析，分配100万元投资资金到不同行业：</p>
                    
                    <div class="five-forces-container">
                        <div class="force-card">
                            <div class="force-title">制造业</div>
                            <div class="force-description">成熟期行业，竞争激烈但现金流稳定</div>
                            <div class="force-rating">
                                <input type="range" min="0" max="100" value="20" class="industry-allocation" data-industry="manufacturing">
                            </div>
                            <div class="allocation-value">20% - 20万元</div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">科技行业</div>
                            <div class="force-description">成长期行业，增长快但风险较高</div>
                            <div class="force-rating">
                                <input type="range" min="0" max="100" value="30" class="industry-allocation" data-industry="technology">
                            </div>
                            <div class="allocation-value">30% - 30万元</div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">医疗健康</div>
                            <div class="force-description">防御性行业，需求稳定但受政策影响</div>
                            <div class="force-rating">
                                <input type="range" min="0" max="100" value="25" class="industry-allocation" data-industry="healthcare">
                            </div>
                            <div class="allocation-value">25% - 25万元</div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">消费品</div>
                            <div class="force-description">成熟期行业，周期性较弱，品牌价值重要</div>
                            <div class="force-rating">
                                <input type="range" min="0" max="100" value="25" class="industry-allocation" data-industry="consumer">
                            </div>
                            <div class="allocation-value">25% - 25万元</div>
                        </div>
                    </div>
                    
                    <div class="analysis-result" style="margin-top: 20px;">
                        <div class="result-score">投资组合汇总: 100万元</div>
                        <div class="result-description">
                            <div class="characteristic">
                                <div class="characteristic-name">制造业</div>
                                <div class="characteristic-value" id="mf-allocation">20万元 (20%)</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">科技行业</div>
                                <div class="characteristic-value" id="tech-allocation">30万元 (30%)</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">医疗健康</div>
                                <div class="characteristic-value" id="health-allocation">25万元 (25%)</div>
                            </div>
                            <div class="characteristic">
                                <div class="characteristic-name">消费品</div>
                                <div class="characteristic-value" id="consumer-allocation">25万元 (25%)</div>
                            </div>
                        </div>
                    </div>
                    
                    <button class="btn btn-success" id="execute-investment" style="margin-top: 20px;">执行投资</button>
                    
                    <div class="analysis-result" id="investment-result" style="display: none; margin-top: 20px;">
                        <div class="result-score" id="investment-return">预期年化回报: --%</div>
                        <div class="result-description" id="investment-analysis"></div>
                        
                        <div class="investment-recommendation">
                            <h3>投资策略评估</h3>
                            <div id="strategy-evaluation"></div>
                        </div>
                    </div>
                </div>
                
                <div class="panel">
                    <h3>行业投资要点</h3>
                    <div class="five-forces-container">
                        <div class="force-card">
                            <div class="force-title">导入期行业</div>
                            <div class="force-description">
                                <strong>投资策略:</strong> 高风险投资，关注技术创新和先发优势
                                <br><strong>关键指标:</strong> 研发投入、专利数量、市场接受度
                            </div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">成长期行业</div>
                            <div class="force-description">
                                <strong>投资策略:</strong> 增长投资，关注市场份额和收入增长
                                <br><strong>关键指标:</strong> 收入增长率、市场份额、用户增长
                            </div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">成熟期行业</div>
                            <div class="force-description">
                                <strong>投资策略:</strong> 价值投资，关注现金流和股息
                                <br><strong>关键指标:</strong> 利润率、现金流、股息率、市场份额
                            </div>
                        </div>
                        
                        <div class="force-card">
                            <div class="force-title">衰退期行业</div>
                            <div class="force-description">
                                <strong>投资策略:</strong> 特殊情况投资，关注资产价值和转型机会
                                <br><strong>关键指标:</strong> 资产价值、现金流、转型进展
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="instructions">
            <h3>学习目标</h3>
            <ol>
                <li>掌握波特五力模型的分析框架和应用方法</li>
                <li>能够使用五力模型评估特定行业的竞争环境和吸引力</li>
                <li>理解行业生命周期的四个阶段及其特点</li>
                <li>学会根据行业生命周期制定相应的投资策略</li>
                <li>能够基于行业分析提出合理的投资建议</li>
            </ol>
            <p><strong>学习重点：</strong>通过行业分析，深入理解行业竞争结构和生命周期，培养基于行业分析的投资决策能力。</p>
        </div>
    </div>

    <script>
        // 行业数据
        const industries = {
            'manufacturing': {
                name: '制造业',
                description: '包括汽车、机械、电子等传统制造领域',
                defaultRatings: {
                    supplier: 'medium',
                    buyer: 'high',
                    'new-entrants': 'medium',
                    substitutes: 'medium',
                    rivalry: 'high'
                }
            },
            'technology': {
                name: '科技行业',
                description: '包括软件、硬件、互联网服务等领域',
                defaultRatings: {
                    supplier: 'low',
                    buyer: 'high',
                    'new-entrants': 'low',
                    substitutes: 'high',
                    rivalry: 'high'
                }
            },
            'healthcare': {
                name: '医疗健康',
                description: '包括制药、医疗器械、医疗服务等领域',
                defaultRatings: {
                    supplier: 'medium',
                    buyer: 'low',
                    'new-entrants': 'high',
                    substitutes: 'low',
                    rivalry: 'medium'
                }
            },
            'consumer': {
                name: '消费品',
                description: '包括食品饮料、日用品、服装等领域',
                defaultRatings: {
                    supplier: 'medium',
                    buyer: 'high',
                    'new-entrants': 'low',
                    substitutes: 'high',
                    rivalry: 'high'
                }
            }
        };
        
        // 行业生命周期数据
        const lifecycleData = {
            labels: ['导入期', '成长期', '成熟期', '衰退期'],
            datasets: [
                {
                    label: '市场规模',
                    data: [10, 60, 100, 40],
                    borderColor: '#3498db',
                    backgroundColor: 'rgba(52, 152, 219, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4
                },
                {
                    label: '利润水平',
                    data: [-20, 30, 40, 10],
                    borderColor: '#2ecc71',
                    backgroundColor: 'rgba(46, 204, 113, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4
                },
                {
                    label: '竞争强度',
                    data: [20, 60, 80, 40],
                    borderColor: '#e74c3c',
                    backgroundColor: 'rgba(231, 76, 60, 0.1)',
                    borderWidth: 2,
                    fill: true,
                    tension: 0.4
                }
            ]
        };
        
        // 投资回报数据
        const investmentReturns = {
            'manufacturing': 6,    // 制造业预期年化回报
            'technology': 12,      // 科技行业预期年化回报
            'healthcare': 8,       // 医疗健康预期年化回报
            'consumer': 7          // 消费品预期年化回报
        };
        
        let currentIndustry = 'manufacturing';
        let lifecycleChart;
        
        // 初始化函数
        function init() {
            // 标签页切换
            document.querySelectorAll('.tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                    
                    this.classList.add('active');
                    const tabId = this.getAttribute('data-tab');
                    document.getElementById(tabId).classList.add('active');
                });
            });
            
            // 行业选择
            document.querySelectorAll('.industry-card').forEach(card => {
                card.addEventListener('click', function() {
                    document.querySelectorAll('.industry-card').forEach(c => c.classList.remove('active'));
                    this.classList.add('active');
                    
                    currentIndustry = this.getAttribute('data-industry');
                    const industry = industries[currentIndustry];
                    
                    document.getElementById('selected-industry-name').textContent = `${industry.name} - 波特五力分析`;
                    
                    // 重置评级按钮
                    resetRatingButtons();
                    
                    // 设置默认评级
                    setDefaultRatings(industry.defaultRatings);
                });
            });
            
            // 评级按钮选择
            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const force = this.getAttribute('data-force');
                    const rating = this.getAttribute('data-rating');
                    
                    // 移除同组其他按钮的选中状态
                    const parent = this.parentElement;
                    parent.querySelectorAll('.rating-btn').forEach(b => b.classList.remove('selected'));
                    
                    // 设置当前按钮为选中状态
                    this.classList.add('selected');
                });
            });
            
            // 行业分析
            document.getElementById('analyze-industry').addEventListener('click', function() {
                const ratings = getCurrentRatings();
                const score = calculateAttractivenessScore(ratings);
                const description = getAttractivenessDescription(score);
                const suggestion = getInvestmentSuggestion(score, currentIndustry);
                
                document.getElementById('attractiveness-score').textContent = `行业吸引力评分: ${score}/100`;
                document.getElementById('attractiveness-description').textContent = description;
                document.getElementById('investment-suggestion').innerHTML = suggestion;
                document.getElementById('analysis-result').style.display = 'block';
            });
            
            // 投资分配滑块
            document.querySelectorAll('.industry-allocation').forEach(slider => {
                slider.addEventListener('input', function() {
                    const industry = this.getAttribute('data-industry');
                    const value = parseInt(this.value);
                    
                    // 更新显示值
                    this.parentElement.nextElementSibling.textContent = `${value}% - ${value}万元`;
                    
                    // 更新投资组合汇总
                    document.getElementById(`${industry}-allocation`).textContent = `${value}万元 (${value}%)`;
                    
                    // 重新平衡其他滑块，确保总和为100%
                    rebalanceSliders(industry, value);
                });
            });
            
            // 执行投资
            document.getElementById('execute-investment').addEventListener('click', function() {
                const manufacturingAllocation = parseInt(document.querySelector('.industry-allocation[data-industry="manufacturing"]').value);
                const technologyAllocation = parseInt(document.querySelector('.industry-allocation[data-industry="technology"]').value);
                const healthcareAllocation = parseInt(document.querySelector('.industry-allocation[data-industry="healthcare"]').value);
                const consumerAllocation = parseInt(document.querySelector('.industry-allocation[data-industry="consumer"]').value);
                
                // 计算总投资收益率
                const totalReturn = 
                    (manufacturingAllocation * investmentReturns.manufacturing + 
                     technologyAllocation * investmentReturns.technology + 
                     healthcareAllocation * investmentReturns.healthcare + 
                     consumerAllocation * investmentReturns.consumer) / 100;
                
                // 计算各行业收益
                const manufacturingReturn = (manufacturingAllocation * investmentReturns.manufacturing) / 100;
                const technologyReturn = (technologyAllocation * investmentReturns.technology) / 100;
                const healthcareReturn = (healthcareAllocation * investmentReturns.healthcare) / 100;
                const consumerReturn = (consumerAllocation * investmentReturns.consumer) / 100;
                
                let analysisText = `
                    <p>基于行业生命周期和竞争分析，您的投资组合预期表现：</p>
                    <div style="margin-top: 15px;">
                        <div class="characteristic">
                            <div class="characteristic-name">制造业回报</div>
                            <div class="characteristic-value">${manufacturingReturn.toFixed(2)}万元 (${investmentReturns.manufacturing}%)</div>
                        </div>
                        <div class="characteristic">
                            <div class="characteristic-name">科技行业回报</div>
                            <div class="characteristic-value">${technologyReturn.toFixed(2)}万元 (${investmentReturns.technology}%)</div>
                        </div>
                        <div class="characteristic">
                            <div class="characteristic-name">医疗健康回报</div>
                            <div class="characteristic-value">${healthcareReturn.toFixed(2)}万元 (${investmentReturns.healthcare}%)</div>
                        </div>
                        <div class="characteristic">
                            <div class="characteristic-name">消费品回报</div>
                            <div class="characteristic-value">${consumerReturn.toFixed(2)}万元 (${investmentReturns.consumer}%)</div>
                        </div>
                    </div>
                `;
                
                let strategyText = getStrategyEvaluation(manufacturingAllocation, technologyAllocation, totalReturn);
                
                document.getElementById('investment-return').textContent = `预期年化回报: ${totalReturn.toFixed(2)}%`;
                document.getElementById('investment-analysis').innerHTML = analysisText;
                document.getElementById('strategy-evaluation').innerHTML = strategyText;
                document.getElementById('investment-result').style.display = 'block';
            });
            
            // 初始化行业生命周期图表
            initLifecycleChart();
        }
        
        // 重置评级按钮
        function resetRatingButtons() {
            document.querySelectorAll('.rating-btn').forEach(btn => {
                btn.classList.remove('selected');
            });
        }
        
        // 设置默认评级
        function setDefaultRatings(defaultRatings) {
            for (const [force, rating] of Object.entries(defaultRatings)) {
                const btn = document.querySelector(`.rating-btn[data-force="${force}"][data-rating="${rating}"]`);
                if (btn) {
                    btn.classList.add('selected');
                }
            }
        }
        
        // 获取当前评级
        function getCurrentRatings() {
            const ratings = {};
            const forces = ['supplier', 'buyer', 'new-entrants', 'substitutes', 'rivalry'];
            
            forces.forEach(force => {
                const selectedBtn = document.querySelector(`.rating-btn[data-force="${force}"].selected`);
                ratings[force] = selectedBtn ? selectedBtn.getAttribute('data-rating') : 'medium';
            });
            
            return ratings;
        }
        
        // 计算行业吸引力得分
        function calculateAttractivenessScore(ratings) {
            let score = 100;
            
            // 根据五力评级调整得分
            // 供应商议价能力高 -> 减分
            if (ratings.supplier === 'high') score -= 20;
            else if (ratings.supplier === 'medium') score -= 10;
            
            // 购买者议价能力高 -> 减分
            if (ratings.buyer === 'high') score -= 20;
            else if (ratings.buyer === 'medium') score -= 10;
            
            // 新进入者威胁高 -> 减分
            if (ratings['new-entrants'] === 'high') score -= 15;
            else if (ratings['new-entrants'] === 'medium') score -= 7;
            
            // 替代品威胁高 -> 减分
            if (ratings.substitutes === 'high') score -= 15;
            else if (ratings.substitutes === 'medium') score -= 7;
            
            // 同业竞争程度高 -> 减分
            if (ratings.rivalry === 'high') score -= 20;
            else if (ratings.rivalry === 'medium') score -= 10;
            
            return Math.max(0, score);
        }
        
        // 获取行业吸引力描述
        function getAttractivenessDescription(score) {
            if (score >= 80) {
                return "该行业具有很高的吸引力，竞争环境有利，存在较好的投资机会。";
            } else if (score >= 60) {
                return "该行业具有中等吸引力，竞争环境一般，需要选择性投资。";
            } else if (score >= 40) {
                return "该行业吸引力较低，竞争环境较为严峻，投资需谨慎。";
            } else {
                return "该行业吸引力很低，竞争环境恶劣，建议避免投资或寻找特殊机会。";
            }
        }
        
        // 获取投资建议
        function getInvestmentSuggestion(score, industry) {
            const industryName = industries[industry].name;
            
            if (score >= 80) {
                return `
                    <p><strong>建议：积极投资</strong></p>
                    <p>${industryName}行业竞争环境有利，建议加大投资比例，重点关注行业龙头和具有竞争优势的企业。</p>
                `;
            } else if (score >= 60) {
                return `
                    <p><strong>建议：选择性投资</strong></p>
                    <p>${industryName}行业竞争环境一般，建议选择性投资具有独特竞争优势或细分市场领导地位的企业。</p>
                `;
            } else if (score >= 40) {
                return `
                    <p><strong>建议：谨慎投资</strong></p>
                    <p>${industryName}行业竞争环境较为严峻，建议谨慎投资，重点关注具有成本优势或技术壁垒的企业。</p>
                `;
            } else {
                return `
                    <p><strong>建议：避免投资或寻找特殊机会</strong></p>
                    <p>${industryName}行业竞争环境恶劣，建议避免大规模投资，可关注行业整合或转型带来的特殊机会。</p>
                `;
            }
        }
        
        // 重新平衡滑块
        function rebalanceSliders(changedIndustry, newValue) {
            const sliders = document.querySelectorAll('.industry-allocation');
            let total = 0;
            let changedSliderValue = 0;
            
            // 计算当前总值和更改的滑块值
            sliders.forEach(slider => {
                const industry = slider.getAttribute('data-industry');
                const value = parseInt(slider.value);
                
                if (industry === changedIndustry) {
                    changedSliderValue = newValue;
                    total += newValue;
                } else {
                    total += value;
                }
            });
            
            // 如果总和超过100%，按比例减少其他滑块的值
            if (total > 100) {
                const excess = total - 100;
                const otherSliders = Array.from(sliders).filter(slider => 
                    slider.getAttribute('data-industry') !== changedIndustry);
                
                let otherTotal = otherSliders.reduce((sum, slider) => sum + parseInt(slider.value), 0);
                
                otherSliders.forEach(slider => {
                    const industry = slider.getAttribute('data-industry');
                    const currentValue = parseInt(slider.value);
                    const newValue = Math.max(0, currentValue - (currentValue / otherTotal) * excess);
                    
                    slider.value = Math.round(newValue);
                    
                    // 更新显示值
                    slider.parentElement.nextElementSibling.textContent = `${Math.round(newValue)}% - ${Math.round(newValue)}万元`;
                    
                    // 更新投资组合汇总
                    document.getElementById(`${industry}-allocation`).textContent = `${Math.round(newValue)}万元 (${Math.round(newValue)}%)`;
                });
            }
        }
        
        // 获取策略评估
        function getStrategyEvaluation(manufacturing, technology, totalReturn) {
            if (technology >= 40 && totalReturn > 9) {
                return `
                    <p>您的投资组合偏重成长型行业（科技），预期回报较高，但同时也承担较高风险。这种配置适合风险承受能力较强的投资者。</p>
                    <p><strong>建议：</strong> 考虑适当增加防御性行业（如医疗健康）的配置，以平衡组合风险。</p>
                `;
            } else if (manufacturing >= 30 && technology >= 20 && totalReturn > 7) {
                return `
                    <p>您的投资组合较为均衡，在成长型和价值型行业之间取得了良好平衡。这种配置适合大多数投资者。</p>
                    <p><strong>建议：</strong> 当前配置较为合理，可继续保持或根据市场变化微调。</p>
                `;
            } else if (manufacturing >= 40 && totalReturn < 7) {
                return `
                    <p>您的投资组合偏重价值型行业（制造），风险较低但预期回报也相对保守。</p>
                    <p><strong>建议：</strong> 考虑适度增加成长型行业的配置，以提高组合的长期增长潜力。</p>
                `;
            } else {
                return `
                    <p>您的投资组合配置较为特殊，可能在某些行业过度集中或分散。</p>
                    <p><strong>建议：</strong> 根据个人风险偏好和投资目标，考虑调整行业配置以实现更好的风险收益平衡。</p>
                `;
            }
        }
        
        // 初始化行业生命周期图表
        function initLifecycleChart() {
            const ctx = document.getElementById('lifecycle-chart').getContext('2d');
            
            lifecycleChart = new Chart(ctx, {
                type: 'line',
                data: lifecycleData,
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    scales: {
                        y: {
                            beginAtZero: false,
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            },
                            title: {
                                display: true,
                                text: '指数 (基准值)'
                            }
                        },
                        x: {
                            grid: {
                                color: 'rgba(0, 0, 0, 0.05)'
                            }
                        }
                    },
                    plugins: {
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    interaction: {
                        intersect: false,
                        mode: 'nearest'
                    }
                }
            });
        }
        
        // 初始化应用
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
